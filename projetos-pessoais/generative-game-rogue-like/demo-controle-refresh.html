<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demonstração de Controle de Refresh</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1f30, #0d1117);
      color: #e6e9f0;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(20, 24, 40, 0.8);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }
    
    h1 {
      text-align: center;
      color: #68a8ff;
      margin-bottom: 30px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .demo-section {
      margin-bottom: 40px;
      padding: 20px;
      background: rgba(30, 35, 55, 0.6);
      border-radius: 10px;
      border: 1px solid rgba(104, 168, 255, 0.3);
    }
    
    h2 {
      color: #7ab7ff;
      border-bottom: 2px solid #4a6fc9;
      padding-bottom: 10px;
    }
    
    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .config-item {
      background: rgba(40, 45, 65, 0.7);
      padding: 15px;
      border-radius: 8px;
      border: 1px solid rgba(104, 168, 255, 0.2);
    }
    
    .config-item h3 {
      margin-top: 0;
      color: #8ec2ff;
    }
    
    .code-block {
      background: #1e1e2e;
      border-left: 4px solid #4a6fc9;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 14px;
      margin: 15px 0;
    }
    
    .highlight {
      color: #ff9e5b;
      font-weight: bold;
    }
    
    .feature-list {
      list-style-type: none;
      padding: 0;
    }
    
    .feature-list li {
      padding: 8px 0;
      border-bottom: 1px solid rgba(104, 168, 255, 0.1);
    }
    
    .feature-list li:before {
      content: "✓";
      color: #68ff9a;
      font-weight: bold;
      margin-right: 10px;
    }
    
    .button-demo {
      display: inline-block;
      background: linear-gradient(135deg, #4f7cff, #7aa0ff);
      color: #07122a;
      padding: 12px 24px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      margin: 10px 5px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(79, 124, 255, 0.3);
    }
    
    .button-demo:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(79, 124, 255, 0.5);
    }
    
    .button-demo.secondary {
      background: linear-gradient(135deg, #2b3146, #1b2030);
      color: #c6d2ff;
      border: 1px solid rgba(88, 120, 188, 0.45);
    }
    
    .button-demo.secondary:hover {
      background: linear-gradient(135deg, #3b4156, #2b3040);
      border-color: rgba(122, 183, 255, 0.6);
    }
    
    .canvas-container {
      text-align: center;
      margin: 20px 0;
    }
    
    canvas {
      border: 2px solid #4a6fc9;
      border-radius: 10px;
      background: #0a0e1a;
    }
    
    .controls {
      text-align: center;
      margin: 20px 0;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(104, 168, 255, 0.2);
      color: #8fa7d2;
    }
    
    .refresh-display {
      font-size: 24px;
      font-weight: bold;
      color: #ff9e5b;
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: rgba(40, 45, 65, 0.7);
      border-radius: 8px;
      border: 1px solid rgba(255, 158, 91, 0.3);
    }
    
    .timer-bar {
      height: 20px;
      background: #2b3146;
      border-radius: 10px;
      margin: 20px 0;
      overflow: hidden;
      border: 1px solid rgba(104, 168, 255, 0.3);
    }
    
    .timer-progress {
      height: 100%;
      background: linear-gradient(90deg, #4f7cff, #7aa0ff);
      width: 0%;
      transition: width 0.1s linear;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Demonstração de Controle de Refresh</h1>
    
    <div class="demo-section">
      <h2>Funcionalidade Implementada</h2>
      <p>O sistema agora permite controlar o intervalo de atualização dos relatórios, permitindo que o usuário leia com calma as informações. Esta funcionalidade inclui:</p>
      
      <ul class="feature-list">
        <li>Seletor de intervalo de atualização (0.5 a 10 segundos)</li>
        <li>Visualização em tempo real do tempo restante para a próxima atualização</li>
        <li>Rastreamento do melhor e pior fitness de todas as gerações</li>
        <li>Identificação da geração em que ocorreu o melhor fitness</li>
        <li>Interface intuitiva e responsiva</li>
      </ul>
      
      <div class="refresh-display">
        Próxima atualização em: <span id="tempo-restante">5.0</span> segundos
      </div>
      
      <div class="timer-bar">
        <div class="timer-progress" id="progress-bar"></div>
      </div>
      
      <div class="controls">
        <button class="button-demo" onclick="setIntervalo(0.5)">0.5s</button>
        <button class="button-demo" onclick="setIntervalo(1)">1s</button>
        <button class="button-demo" onclick="setIntervalo(2)">2s</button>
        <button class="button-demo" onclick="setIntervalo(3)">3s</button>
        <button class="button-demo" onclick="setIntervalo(5)">5s</button>
        <button class="button-demo" onclick="setIntervalo(10)">10s</button>
      </div>
    
    <div class="demo-section">
      <h2>Configuração do Sistema</h2>
      <p>O intervalo de atualização pode ser configurado através do painel de controle:</p>
      
      <div class="config-grid">
        <div class="config-item">
          <h3>Parâmetros de Atualização</h3>
          <div class="code-block">
            ia: {<br>
              &nbsp;&nbsp;tamanhoPopulacao: 32,<br>
              &nbsp;&nbsp;taxaMutacao: 0.1,<br>
              &nbsp;&nbsp;<span class="highlight">relatorioIntervalo: 1</span>, // Intervalo em segundos<br>
              &nbsp;&nbsp;...<br>
            }
          </div>
        
        <div class="config-item">
          <h3>Status Histórico</h3>
          <div class="code-block">
            status: {<br>
              &nbsp;&nbsp;<span class="highlight">melhorFitnessGeral: 15420</span>,<br>
              &nbsp;&nbsp;<span class="highlight">piorFitnessGeral: 120</span>,<br>
              &nbsp;&nbsp;<span class="highlight">geracaoMelhor: 42</span>,<br>
              &nbsp;&nbsp;...<br>
            }
          </div>
        </div>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>Implementação Técnica</h2>
      <p>O controle de refresh foi implementado com as seguintes funcionalidades:</p>
      
      <div class="config-grid">
        <div class="config-item">
          <h3>PainelControles.js</h3>
          <div class="code-block">
            class PainelControles {<br>
              &nbsp;&nbsp;_adicionarControlesAdicionais() {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// ...<br>
              &nbsp;&nbsp;&nbsp;&nbsp;const selectRefresh = document.createElement("select");<br>
              &nbsp;&nbsp;&nbsp;&nbsp;selectRefresh.id = "intervalo-refresh";<br>
              &nbsp;&nbsp;&nbsp;&nbsp;selectRefresh.innerHTML = `<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<option value="0.5">0.5 segundos</option><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<option value="1" selected>1 segundo</option><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<option value="2">2 segundos</option><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<option value="3">3 segundos</option><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<option value="5">5 segundos</option><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<option value="10">10 segundos</option><br>
              &nbsp;&nbsp;&nbsp;&nbsp;`;<br><br>
              
              &nbsp;&nbsp;&nbsp;&nbsp;selectRefresh.addEventListener("change", (evento) => {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;const novoIntervalo = parseFloat(evento.target.value);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.configuracao.ia.relatorioIntervalo = novoIntervalo;<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.registrarEventoRelatorio(`Intervalo: ${novoIntervalo}s`);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;});<br>
              &nbsp;&nbsp;}<br>
            }
          </div>
        </div>
        
        <div class="config-item">
          <h3>MonitorAprendizado.js</h3>
          <div class="code-block">
            class MonitorAprendizado {<br>
              &nbsp;&nbsp;atualizar(resumo, opcoes = {}) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// ...<br>
              &nbsp;&nbsp;&nbsp;&nbsp;if (resumo.melhorFitness > this.melhorFitnessGeral) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.melhorFitnessGeral = resumo.melhorFitness;<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.geracaoMelhorFitness = resumo.geracao;<br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              &nbsp;&nbsp;&nbsp;&nbsp;if (resumo.melhorFitness < this.piorFitnessGeral || <br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.piorFitnessGeral === Infinity) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.piorFitnessGeral = resumo.melhorFitness;<br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              &nbsp;&nbsp;}<br><br>
              
              &nbsp;&nbsp;_renderizar() {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// Atualiza interface com histórico<br>
              &nbsp;&nbsp;&nbsp;&nbsp;if (this.painel.areaStatus) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// ...<br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              &nbsp;&nbsp;}<br>
            }
          </div>
        </div>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>Visualização</h2>
      <p>Veja como o controle de refresh aparece no painel de relatórios:</p>
      
      <div class="canvas-container">
        <canvas id="demoCanvas" width="800" height="300"></canvas>
      </div>
      
      <div class="controls">
        <button class="button-demo" onclick="iniciarDemo()">Iniciar Demonstração</button>
        <button class="button-demo secondary" onclick="pausarDemo()">Pausar</button>
      </div>
    
    <footer>
      <p>Implementação completa do controle de refresh para os relatórios</p>
      <p>© 2025 - Todos os direitos reservados</p>
    </footer>
  </div>

  <script>
    // Código de demonstração
    const canvas = document.getElementById('demoCanvas');
    const ctx = canvas.getContext('2d');
    let animacaoId = null;
    let intervaloAtualizacao = 1; // segundos
    let tempoRestante = 1;
    let ultimoTempo = 0;
    
    // Elementos da interface
    const tempoRestanteElement = document.getElementById('tempo-restante');
    const progressBar = document.getElementById('progress-bar');
    
    // Funções de controle
    function setIntervalo(intervalo) {
      intervaloAtualizacao = intervalo;
      tempoRestante = intervalo;
      atualizarDisplay();
    }
    
    function atualizarDisplay() {
      tempoRestanteElement.textContent = tempoRestante.toFixed(1);
      
      // Atualizar barra de progresso
      const percentual = ((intervaloAtualizacao - tempoRestante) / intervaloAtualizacao) * 100;
      progressBar.style.width = `${percentual}%`;
    }
    
    function iniciarDemo() {
      if (animacaoId) {
        cancelAnimationFrame(animacaoId);
      }
      ultimoTempo = performance.now();
      animar();
    }
    
    function pausarDemo() {
      if (animacaoId) {
        cancelAnimationFrame(animacaoId);
        animacaoId = null;
      }
    }
    
    // Função de animação
    function animar(tempoAtual = 0) {
      if (!ultimoTempo) ultimoTempo = tempoAtual;
      
      const delta = (tempoAtual - ultimoTempo) / 1000; // Converter para segundos
      ultimoTempo = tempoAtual;
      
      // Atualizar tempo restante
      tempoRestante = Math.max(0, tempoRestante - delta);
      
      // Se o tempo acabou, reiniciar
      if (tempoRestante <= 0) {
        tempoRestante = intervaloAtualizacao;
        
        // Mostrar mensagem de atualização
        mostrarMensagemAtualizacao();
      }
      
      // Atualizar display
      atualizarDisplay();
      
      // Desenhar canvas
      desenharCanvas();
      
      animacaoId = requestAnimationFrame(animar);
    }
    
    function mostrarMensagemAtualizacao() {
      // Efeito visual de atualização
      const elemento = document.querySelector('.refresh-display');
      elemento.style.backgroundColor = 'rgba(79, 124, 255, 0.3)';
      elemento.style.borderColor = 'rgba(79, 124, 255, 0.6)';
      
      setTimeout(() => {
        elemento.style.backgroundColor = 'rgba(40, 45, 65, 0.7)';
        elemento.style.borderColor = 'rgba(255, 158, 91, 0.3)';
      }, 300);
    }
    
    function desenharCanvas() {
      // Limpar o canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Desenhar fundo
      ctx.fillStyle = '#0a0e1a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Desenhar painel de relatórios
      ctx.fillStyle = 'rgba(22, 28, 52, 0.94)';
      ctx.fillRect(20, canvas.width - 40, canvas.height - 40);
      ctx.strokeStyle = 'rgba(118, 187, 255, 0.35)';
      ctx.lineWidth = 1;
      ctx.strokeRect(20, canvas.width - 40, canvas.height - 40);
      
      // Desenhar título
      ctx.fillStyle = '#7ab7ff';
      ctx.font = 'bold 18px Arial';
      ctx.fillText('Painel de Relatórios', 40, 50);
      
      // Desenhar seletor de intervalo
      ctx.fillStyle = '#a6c8ff';
      ctx.font = '14px Arial';
      ctx.fillText('Intervalo de atualização:', 40, 80);
      
      // Desenhar opções de intervalo
      const intervalos = [0.5, 1, 2, 3, 5, 10];
      let x = 40;
      intervalos.forEach(intervalo => {
        ctx.fillStyle = intervalo === intervaloAtualizacao ? '#ff9e5b' : '#c7d8ff';
        ctx.font = intervalo === intervaloAtualizacao ? 'bold 14px Arial' : '14px Arial';
        ctx.fillText(`${intervalo}s`, x, 110);
        x += 50;
      });
      
      // Desenhar barra de progresso
      const barWidth = 300;
      const barHeight = 20;
      const barX = 40;
      const barY = 140;
      
      ctx.fillStyle = '#2b3146';
      ctx.fillRect(barX, barY, barWidth, barHeight);
      ctx.strokeStyle = 'rgba(104, 168, 255, 0.3)';
      ctx.strokeRect(barX, barY, barWidth, barHeight);
      
      const progressWidth = ((intervaloAtualizacao - tempoRestante) / intervaloAtualizacao) * barWidth;
      ctx.fillStyle = '#4f7cff';
      ctx.fillRect(barX, barY, progressWidth, barHeight);
      
      // Desenhar tempo restante
      ctx.fillStyle = '#e8f4ff';
      ctx.font = '14px Arial';
      ctx.fillText(`Próxima atualização em: ${tempoRestante.toFixed(1)}s`, 40, 180);
      
      // Desenhar status histórico
      ctx.fillStyle = '#7ab7ff';
      ctx.font = 'bold 16px Arial';
      ctx.fillText('Evolução Histórica', 40, 220);
      
      ctx.fillStyle = '#c7d8ff';
      ctx.font = '14px Arial';
      ctx.fillText(`Melhor Fitness: 15420`, 40, 250);
      ctx.fillText(`Pior Fitness: 120`, 250, 250);
      ctx.fillText(`Geração do Melhor: 42`, 400, 250);
    }
    
    // Iniciar a demonstração quando a página carregar
    window.onload = function() {
      iniciarDemo();
    };
  </script>
</body>
</html>

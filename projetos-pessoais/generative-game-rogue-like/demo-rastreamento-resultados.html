<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demonstração de Rastreamento de Resultados</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1f30, #0d1117);
      color: #e6e9f0;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(20, 24, 40, 0.8);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }
    
    h1 {
      text-align: center;
      color: #68a8ff;
      margin-bottom: 30px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .demo-section {
      margin-bottom: 40px;
      padding: 20px;
      background: rgba(30, 35, 55, 0.6);
      border-radius: 10px;
      border: 1px solid rgba(104, 168, 255, 0.3);
    }
    
    h2 {
      color: #7ab7ff;
      border-bottom: 2px solid #4a6fc9;
      padding-bottom: 10px;
    }
    
    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .config-item {
      background: rgba(40, 45, 65, 0.7);
      padding: 15px;
      border-radius: 8px;
      border: 1px solid rgba(104, 168, 255, 0.2);
    }
    
    .config-item h3 {
      margin-top: 0;
      color: #8ec2ff;
    }
    
    .code-block {
      background: #1e1e2e;
      border-left: 4px solid #4a6fc9;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 14px;
      margin: 15px 0;
    }
    
    .highlight {
      color: #ff9e5b;
      font-weight: bold;
    }
    
    .feature-list {
      list-style-type: none;
      padding: 0;
    }
    
    .feature-list li {
      padding: 8px 0;
      border-bottom: 1px solid rgba(104, 168, 255, 0.1);
    }
    
    .feature-list li:before {
      content: "✓";
      color: #68ff9a;
      font-weight: bold;
      margin-right: 10px;
    }
    
    .button-demo {
      display: inline-block;
      background: linear-gradient(135deg, #4f7cff, #7aa0ff);
      color: #07122a;
      padding: 12px 24px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      margin: 10px 5px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(79, 124, 255, 0.3);
    }
    
    .button-demo:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(79, 124, 255, 0.5);
    }
    
    .button-demo.secondary {
      background: linear-gradient(135deg, #2b3146, #1b2030);
      color: #c6d2ff;
      border: 1px solid rgba(88, 120, 188, 0.45);
    }
    
    .button-demo.secondary:hover {
      background: linear-gradient(135deg, #3b4156, #2b3040);
      border-color: rgba(122, 183, 255, 0.6);
    }
    
    .canvas-container {
      text-align: center;
      margin: 20px 0;
    }
    
    canvas {
      border: 2px solid #4a6fc9;
      border-radius: 10px;
      background: #0a0e1a;
    }
    
    .controls {
      text-align: center;
      margin: 20px 0;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(104, 168, 255, 0.2);
      color: #8fa7d2;
    }
    
    .results-display {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .result-card {
      background: rgba(40, 45, 65, 0.7);
      padding: 20px;
      border-radius: 10px;
      border: 1px solid rgba(104, 168, 255, 0.2);
      text-align: center;
    }
    
    .result-card h3 {
      margin-top: 0;
      color: #8ec2ff;
    }
    
    .result-value {
      font-size: 28px;
      font-weight: bold;
      color: #ff9e5b;
      margin: 10px 0;
    }
    
    .result-label {
      font-size: 14px;
      color: #a6c8ff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .chart-container {
      height: 300px;
      margin: 20px 0;
      background: rgba(30, 35, 55, 0.8);
      border-radius: 10px;
      padding: 15px;
      border: 1px solid rgba(104, 168, 255, 0.2);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Demonstração de Rastreamento de Resultados</h1>
    
    <div class="demo-section">
      <h2>Funcionalidade Implementada</h2>
      <p>O sistema agora rastreia o melhor e pior fitness de todas as gerações, permitindo acompanhar a evolução do desempenho da IA. Esta funcionalidade inclui:</p>
      
      <ul class="feature-list">
        <li>Rastreamento contínuo do melhor fitness geral</li>
        <li>Monitoramento do pior fitness geral</li>
        <li>Identificação da geração em que ocorreu o melhor fitness</li>
        <li>Gráficos de evolução histórica</li>
        <li>Comparação entre diferentes estratégias</li>
      </ul>
      
      <div class="results-display">
        <div class="result-card">
          <h3>Melhor Fitness</h3>
          <div class="result-value" id="melhor-fitness">15420</div>
          <div class="result-label">Pontuação Máxima</div>
        </div>
        
        <div class="result-card">
          <h3>Pior Fitness</h3>
          <div class="result-value" id="pior-fitness">120</div>
          <div class="result-label">Pontuação Mínima</div>
        </div>
        
        <div class="result-card">
          <h3>Geração do Melhor</h3>
          <div class="result-value" id="geracao-melhor">42</div>
          <div class="result-label">Geração Record</div>
        </div>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>Configuração do Sistema</h2>
      <p>Os parâmetros de rastreamento de resultados podem ser configurados através do monitor de aprendizado:</p>
      
      <div class="config-grid">
        <div class="config-item">
          <h3>MonitorAprendizado.js</h3>
          <div class="code-block">
            class MonitorAprendizado {<br>
              &nbsp;&nbsp;constructor(painel) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// ...<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight">this.melhorFitnessGeral = 0;</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight">this.piorFitnessGeral = Infinity;</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight">this.geracaoMelhorFitness = 0;</span><br>
              &nbsp;&nbsp;}<br><br>
              
              &nbsp;&nbsp;atualizar(resumo, opcoes = {}) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// ...<br>
              &nbsp;&nbsp;&nbsp;&nbsp;if (resumo.melhorFitness > this.melhorFitnessGeral) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight">this.melhorFitnessGeral = resumo.melhorFitness;</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight">this.geracaoMelhorFitness = resumo.geracao;</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              &nbsp;&nbsp;&nbsp;&nbsp;if (resumo.melhorFitness < this.piorFitnessGeral || <br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.piorFitnessGeral === Infinity) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="highlight">this.piorFitnessGeral = resumo.melhorFitness;</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              &nbsp;&nbsp;}<br>
            }
          </div>
        </div>
        
        <div class="config-item">
          <h3>PainelControles.js</h3>
          <div class="code-block">
            class PainelControles {<br>
              &nbsp;&nbsp;_adicionarControlesAdicionais() {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;// ...<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.areaStatus = document.createElement("div");<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.areaStatus.className = "status-relatorios";<br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.areaStatus.innerHTML = `<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<h3>Evolução Histórica</h3><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<div class="status-item"><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="status-label">Melhor Fitness:</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span id="melhor-fitness" class="status-valor">0</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;</div><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<div class="status-item"><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="status-label">Pior Fitness:</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span id="pior-fitness" class="status-valor">0</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;</div><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<div class="status-item"><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="status-label">Geração do Melhor:</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span id="geracao-melhor" class="status-valor">0</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;</div>`;<br>
              &nbsp;&nbsp;}<br>
            }
          </div>
        </div>
      </div>
    
    <div class="demo-section">
      <h2>Visualização Gráfica</h2>
      <p>Veja como os resultados são apresentados graficamente:</p>
      
      <div class="chart-container">
        <canvas id="chartCanvas" width="800" height="300"></canvas>
      </div>
      
      <div class="controls">
        <button class="button-demo" onclick="simularEvolucao()">Simular Evolução</button>
        <button class="button-demo secondary" onclick="resetarSimulacao()">Resetar</button>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>Implementação Técnica</h2>
      <p>O rastreamento de resultados foi implementado com as seguintes funcionalidades:</p>
      
      <div class="config-grid">
        <div class="config-item">
          <h3>Atualização Contínua</h3>
          <div class="code-block">
            // Em cada atualização do monitor<br>
            if (resumo.melhorFitness > this.melhorFitnessGeral) {<br>
              &nbsp;&nbsp;// Atualiza o melhor fitness geral<br>
              &nbsp;&nbsp;this.melhorFitnessGeral = resumo.melhorFitness;<br>
              &nbsp;&nbsp;// Registra a geração do melhor fitness<br>
              &nbsp;&nbsp;this.geracaoMelhorFitness = resumo.geracao;<br>
              &nbsp;&nbsp;// Registra evento no log<br>
              &nbsp;&nbsp;this.registrarEvento(<br>
              &nbsp;&nbsp;`🏆 Novo record: ${this.melhorFitnessGeral.toFixed(2)} na geração ${resumo.geracao}!`<br>
              &nbsp;&nbsp;);<br>
            }<br><br>
            
            if (resumo.melhorFitness < this.piorFitnessGeral || <br>
            this.piorFitnessGeral === Infinity) {<br>
              &nbsp;&nbsp;// Atualiza o pior fitness geral<br>
              &nbsp;&nbsp;this.piorFitnessGeral = resumo.melhorFitness;<br>
              &nbsp;&nbsp;// Registra evento no log<br>
              &nbsp;&nbsp;this.registrarEvento(<br>
              &nbsp;&nbsp;`📉 Novo pior resultado: ${this.piorFitnessGeral.toFixed(2)} na geração ${resumo.geracao}`<br>
              &nbsp;&nbsp;);<br>
            }
          </div>
        </div>
        
        <div class="config-item">
          <h3>Interface do Usuário</h3>
          <div class="code-block">
            // Atualização da interface<br>
            if (this.painel.areaStatus) {<br>
              &nbsp;&nbsp;const melhorFitnessElement = <br>
              &nbsp;&nbsp;this.painel.areaStatus.querySelector('#melhor-fitness');<br>
              &nbsp;&nbsp;const piorFitnessElement = <br>
              &nbsp;&nbsp;this.painel.areaStatus.querySelector('#pior-fitness');<br>
              &nbsp;&nbsp;const geracaoMelhorElement = <br>
              &nbsp;&nbsp;this.painel.areaStatus.querySelector('#geracao-melhor');<br><br>
              
              &nbsp;&nbsp;if (melhorFitnessElement) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;melhorFitnessElement.textContent = <br>
              &nbsp;&nbsp;&nbsp;&nbsp;formatarPontos(this.melhorFitnessGeral);<br>
              &nbsp;&nbsp;}<br>
              &nbsp;&nbsp;if (piorFitnessElement) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;piorFitnessElement.textContent = <br>
              &nbsp;&nbsp;&nbsp;&nbsp;formatarPontos(this.piorFitnessGeral);<br>
              &nbsp;&nbsp;}<br>
              &nbsp;&nbsp;if (geracaoMelhorElement) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;geracaoMelhorElement.textContent = <br>
              &nbsp;&nbsp;&nbsp;&nbsp;this.geracaoMelhorFitness;<br>
              &nbsp;&nbsp;}<br>
            }
          </div>
        </div>
      </div>
    
    <footer>
      <p>Implementação completa do rastreamento de resultados para o jogo generativo</p>
      <p>© 2025 - Todos os direitos reservados</p>
    </footer>
  </div>

  <script>
    // Código de demonstração
    const canvas = document.getElementById('chartCanvas');
    const ctx = canvas.getContext('2d');
    let animacaoId = null;
    let dadosEvolucao = [];
    let melhorFitnessGeral = 0;
    let piorFitnessGeral = Infinity;
    let geracaoMelhorFitness = 0;
    
    // Elementos da interface
    const melhorFitnessElement = document.getElementById('melhor-fitness');
    const piorFitnessElement = document.getElementById('pior-fitness');
    const geracaoMelhorElement = document.getElementById('geracao-melhor');
    
    // Funções de simulação
    function simularEvolucao() {
      if (animacaoId) {
        cancelAnimationFrame(animacaoId);
      }
      
      // Resetar dados
      dadosEvolucao = [];
      melhorFitnessGeral = 0;
      piorFitnessGeral = Infinity;
      geracaoMelhorFitness = 0;
      
      // Iniciar simulação
      simularPasso();
    }
    
    function simularPasso(geracao = 0) {
      // Gerar dados simulados de evolução
      const melhorFitness = Math.max(
        1000 + Math.random() * 5000 + geracao * 200,
        melhorFitnessGeral
      );
      
      const mediaFitness = 800 + Math.random() * 3000 + geracao * 150;
      const piorFitness = 100 + Math.random() * 1000 + geracao * 50;
      
      // Atualizar dados históricos
      if (melhorFitness > melhorFitnessGeral) {
        melhorFitnessGeral = melhorFitness;
        geracaoMelhorFitness = geracao;
      }
      
      if (piorFitness < piorFitnessGeral || piorFitnessGeral === Infinity) {
        piorFitnessGeral = piorFitness;
      }
      
      // Adicionar dados à lista
      dadosEvolucao.push({
        geracao,
        melhor: melhorFitness,
        media: mediaFitness,
        pior: piorFitness
      });
      
      // Limitar número de pontos no gráfico
      if (dadosEvolucao.length > 50) {
        dadosEvolucao.shift();
      }
      
      // Atualizar interface
      atualizarInterface();
      
      // Desenhar gráfico
      desenharGrafico();
      
      // Continuar simulação até a geração 100
      if (geracao < 100) {
        animacaoId = setTimeout(() => {
          simularPasso(geracao + 1);
        }, 200);
      }
    }
    
    function resetarSimulacao() {
      if (animacaoId) {
        clearTimeout(animacaoId);
        animacaoId = null;
      }
      
      // Resetar dados
      dadosEvolucao = [];
      melhorFitnessGeral = 0;
      piorFitnessGeral = Infinity;
      geracaoMelhorFitness = 0;
      
      // Atualizar interface
      atualizarInterface();
      
      // Limpar gráfico
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
    
    function atualizarInterface() {
      // Atualizar elementos da interface
      if (melhorFitnessElement) {
        melhorFitnessElement.textContent = formatarPontos(melhorFitnessGeral);
      }
      
      if (piorFitnessElement) {
        piorFitnessElement.textContent = formatarPontos(piorFitnessGeral);
      }
      
      if (geracaoMelhorElement) {
        geracaoMelhorElement.textContent = geracaoMelhorFitness;
      }
    }
    
    function formatarPontos(valor) {
      if (!Number.isFinite(valor)) {
        return "0";
      }
      if (valor >= 1000) {
        return `${(valor / 1000).toFixed(1)}k`;
      }
      if (valor >= 100) {
        return valor.toFixed(0);
      }
      return valor.toFixed(1);
    }
    
    function desenharGrafico() {
      // Limpar o canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Desenhar fundo
      ctx.fillStyle = '#0a0e1a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Se não há dados, sair
      if (dadosEvolucao.length === 0) {
        return;
      }
      
      // Calcular dimensões do gráfico
      const padding = 40;
      const larguraGrafico = canvas.width - padding * 2;
      const alturaGrafico = canvas.height - padding * 2;
      
      // Encontrar valores mínimos e máximos
      let minValor = Infinity;
      let maxValor = -Infinity;
      
      dadosEvolucao.forEach(dado => {
        minValor = Math.min(minValor, dado.pior, dado.media, dado.melhor);
        maxValor = Math.max(maxValor, dado.pior, dado.media, dado.melhor);
      });
      
      // Adicionar margem
      const margem = (maxValor - minValor) * 0.1;
      minValor -= margem;
      maxValor += margem;
      
      // Função para converter valores para coordenadas
      const valorParaY = (valor) => {
        return padding + alturaGrafico - ((valor - minValor) / (maxValor - minValor)) * alturaGrafico;
      };
      
      const geracaoParaX = (geracao) => {
        const ultimaGeracao = dadosEvolucao[dadosEvolucao.length - 1].geracao;
        const primeiraGeracao = dadosEvolucao[0].geracao;
        const rangeGeracoes = Math.max(1, ultimaGeracao - primeiraGeracao);
        return padding + ((geracao - primeiraGeracao) / rangeGeracoes) * larguraGrafico;
      };
      
      // Desenhar grades
      ctx.strokeStyle = 'rgba(104, 168, 255, 0.1)';
      ctx.lineWidth = 1;
      
      // Grade horizontal
      for (let i = 0; i <= 10; i++) {
        const y = padding + (i / 10) * alturaGrafico;
        ctx.beginPath();
        ctx.moveTo(padding, y);
        ctx.lineTo(canvas.width - padding, y);
        ctx.stroke();
      }
      
      // Grade vertical
      for (let i = 0; i <= 10; i++) {
        const x = padding + (i / 10) * larguraGrafico;
        ctx.beginPath();
        ctx.moveTo(x, padding);
        ctx.lineTo(x, canvas.height - padding);
        ctx.stroke();
      }
      
      // Desenhar linhas do gráfico
      const cores = {
        melhor: '#68ff9a',
        media: '#ffef5b',
        pior: '#ff5bd9'
      };
      
      ['melhor', 'media', 'pior'].forEach(tipo => {
        ctx.strokeStyle = cores[tipo];
        ctx.lineWidth = 3;
        ctx.beginPath();
        
        dadosEvolucao.forEach((dado, indice) => {
          const x = geracaoParaX(dado.geracao);
          const y = valorParaY(dado[tipo]);
          
          if (indice === 0) {
            ctx.moveTo(x, y);
          } else {
            ctx.lineTo(x, y);
          }
        });
        
        ctx.stroke();
      });
      
      // Desenhar pontos
      dadosEvolucao.forEach(dado => {
        const x = geracaoParaX(dado.geracao);
        
        ['melhor', 'media', 'pior'].forEach(tipo => {
          const y = valorParaY(dado[tipo]);
          ctx.fillStyle = cores[tipo];
          ctx.beginPath();
          ctx.arc(x, y, 4, 0, Math.PI * 2);
          ctx.fill();
        });
      });
      
      // Desenhar legendas
      ctx.fillStyle = '#e6e9f0';
      ctx.font = '14px Arial';
      ctx.textAlign = 'left';
      
      let yLegenda = 20;
      Object.keys(cores).forEach(tipo => {
        ctx.fillStyle = cores[tipo];
        ctx.fillRect(20, yLegenda - 10, 20, 10);
        ctx.fillStyle = '#e6e9f0';
        ctx.fillText(tipo.charAt(0).toUpperCase() + tipo.slice(1), 50, yLegenda);
        yLegenda += 25;
      });
      
      // Desenhar valores nos eixos
      ctx.fillStyle = '#a6c8ff';
      ctx.font = '12px Arial';
      ctx.textAlign = 'center';
      
      // Eixo X (gerações)
      for (let i = 0; i <= 5; i++) {
        const geracao = dadosEvolucao[Math.floor(i * (dadosEvolucao.length - 1) / 5)]?.geracao || 0;
        const x = padding + (i / 5) * larguraGrafico;
        ctx.fillText(geracao, x, canvas.height - 10);
      }
      
      // Eixo Y (valores)
      ctx.textAlign = 'right';
      for (let i = 0; i <= 5; i++) {
        const valor = minValor + (maxValor - minValor) * (1 - i / 5);
        const y = padding + (i / 5) * alturaGrafico;
        ctx.fillText(formatarPontos(valor), padding - 10, y + 4);
      }
    }
    
    // Iniciar a demonstração quando a página carregar
    window.onload = function() {
      atualizarInterface();
    };
  </script>
</body>
</html>

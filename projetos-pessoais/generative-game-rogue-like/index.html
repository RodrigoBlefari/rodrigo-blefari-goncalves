<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>Rede Neural Rogue</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Space+Grotesk:wght@600;700&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
    <link rel="stylesheet" href="./theme.css" />
  </head>
  <body data-theme="neon" class="ui-v2">
    <div class="game-intro-modal" id="gameIntroModal" hidden>
      <div class="game-intro-modal__backdrop" data-modal-backdrop></div>
      <div class="game-intro-modal__content" role="dialog" aria-modal="true" aria-labelledby="gameIntroTitle" aria-describedby="gameIntroDescription">
        <button type="button" class="game-intro-modal__close" data-modal-close aria-label="Fechar apresentação inicial">×</button>
        <h2 id="gameIntroTitle">Bem-vindo ao laboratório rogue</h2>
        <p class="game-intro-modal__subtitle">Aqui o herói é você e a I.A. ainda está em fase de estágio supervisionado.</p>
        <section class="game-intro-modal__section">
          <h3>O que está acontecendo?</h3>
          <p id="gameIntroDescription">É um rogue-like 2D onde o jogador humano e uma inteligência artificial se revezam na mesma arena. Pense num estagiário robótico tentando aprender com o seu exemplo — e anotando tudo no painel à esquerda.</p>
        </section>
        <section class="game-intro-modal__section">
          <h3>Como brincar sem precisar de PhD?</h3>
          <ul>
            <li>No painel Direito você liga/desliga modos de I.A ativo ou Não.</li>
            <li>No painel inferior acompanhe os mapas neurais, fitness e fofocas da IA em tempo real.</li>
            <li>Você pode pausar, reiniciar e brincar com parâmetros sem quebrar nada. Prometemos.</li>
          </ul>
          <p class="game-intro-modal__note">Spoiler: no final da página tem um guia completo com as nerdices todas.</p>
        </section>
        <label class="game-intro-modal__remember">
          <input type="checkbox" id="gameIntroModalRemember" />
          Não quero ver essa apresentação pelos próximos 7 dias
        </label>
        <div class="game-intro-modal__actions">
          <button type="button" class="game-intro-modal__action" data-modal-accept>Partiu explorar!</button>
        </div>
      </div>
    </div>

    <div id="interface">
      <aside id="coluna-esquerda" class="painel-controle">
        <section id="controles-jogo" class="bloco-controle" data-collapsible data-title="Controles do jogo"></section>
      </aside>
      <main id="painel-jogo">
        <header id="cabecalho" class="cabecalho-v2">
          <div class="cabecalho-v2__top">
            <h1 class="titulo-jogo">Rede Neural Rogue</h1>
            <div id="ui-preferencias" class="ui-preferencias" role="group" aria-label="Preferências de interface">
              <label for="themeSelect" class="visually-hidden">Tema</label>
              <select id="themeSelect" class="ui-select" aria-label="Selecionar tema">
                <option value="neon">Neon Noir</option>
                <option value="cyber">Cyber Sunset</option>
                <option value="mono">Mono Clean</option>
              </select>
            </div>
          </div>
          <p id="descricao" class="descricao-jogo">
            Rogue-like 2D com modos Jogador e Aprendizado. Interface redesenhada com novos temas e tipografia.
          </p>
        </header>
        <div id="area-canvas">
          <canvas id="tela-jogo" width="960" height="540"></canvas>
          <div id="tela-derrota" class="oculto"></div>
        </div>
        <div id="hud">
          <div id="evolucao-topo" aria-live="polite">
            <span class="evo-item"><strong>Geração:</strong> <span id="evo-geracao">0</span></span>
            <span class="evo-item"><strong>Melhor:</strong> <span id="evo-melhor">0</span></span>
            <span class="evo-item"><strong>Média:</strong> <span id="evo-media">0</span></span>
            <span class="evo-item"><strong>Estado:</strong> <span id="evo-estado">aquecendo</span></span>
          </div>
          <div id="info-jogador">
            <div id="hp-jogador">
              <div class="hp-label">Vida do Jogador</div>
              <div class="hp-valor"></div>
            </div>
            <div id="modo-ia">
              <div class="modo-label">Modo</div>
              <div class="modo-valor">Jogador</div>
            </div>
            <div id="indicador-qualidade">
              <div class="qualidade-label">Qualidade da I.A</div>
              <div class="qualidade-medidor">
                <div class="qualidade-gradiente"></div>
                <div id="qualidade-ponteiro"></div>
              </div>
              <div id="qualidade-estado">Aguardando avaliacao</div>
            </div>
            <div id="historico-ia">
              <div class="historico-label">Histórico da I.A</div>
              <div id="historico-lista"></div>
            </div>
        </div>
        <div id="comandos-jogo">
          <div class="cmd"><kbd>←</kbd><kbd>→</kbd> ou <kbd>A</kbd><kbd>D</kbd> mover</div>
          <div class="cmd"><kbd>Espaço</kbd> pular</div>
          <div class="cmd"><kbd>R</kbd> reiniciar</div>
          <div class="cmd"><kbd>P</kbd> pausar</div>
          <div class="cmd"><kbd>M</kbd> modo desempenho (toggle efeitos)</div>
        </div>
      </div>
      <section id="painel-visualizacoes" class="bloco-controle" data-collapsible>
          <h2>Mapa neural</h2>
          <canvas id="canvas-ativacoes" width="960" height="280"></canvas>
          <canvas id="canvas-fitness" width="960" height="160"></canvas>
          <div class="explicacao-visualizacao">
            <p>
              Entradas do mapa neural: PX posicao lateral, DP delta horizontal do projetil, DY delta vertical,
              TI tempo ate impacto, DZ densidade local de projetis, IX delta do inimigo, IY diferencial vertical
              do inimigo e MEM estado interno. Cores azul/laranja indicam sinal positivo/negativo.
            </p>
            <p>
              O painel central sintetiza tres nodos: urg proj (pressao imediata de projetis), press inimigo
              (forca taticas dos inimigos) e memoria ativa (estado recursivo). Conexoes brilham proporcionalmente
              aos pesos evoluidos.
            </p>
            <p>
              A barra inferior resume fitness instantaneo, movimento bruto, estado de evasao e probabilidade de
              pulo estimada. O grafico a direita acompanha melhor individuo e media da populacao ao longo das
              geracoes.
            </p>
            <p>
              Indicadores de boas praticas: o painel de resumo contextualiza o ritmo do aprendizado (hiperplastico,
              acelerado, gradual, homeostase, estagnado ou regressivo) e sugere ajustes de exploracao ou estabilidade.
            </p>
          </div>
        </section>
        <section id="painel-relatorios" data-collapsible data-title="Relatórios"></section>
      </main>
      <aside id="coluna-direita" class="painel-controle">
        <section id="controles-ia" class="bloco-controle" data-collapsible data-title="Controles da IA"></section>
      </aside>
      <footer id="painel-inferior" class="painel-controle">
        <section id="guia-projeto" class="game-docs" aria-labelledby="guiaProjetoTitulo" data-collapsible data-title="Guia do projeto">
          <div class="game-docs__wrap">
            <h2 id="guiaProjetoTitulo">Manual de bordo do Rede Neural Rogue</h2>
            <p class="game-docs__lead">Se você chegou até aqui, parabéns: já sobreviveu ao estagiário digital e ao modal. Agora vem uma dose de explicação divertida com um after credit técnico para quem curte apertar botões certos.</p>
            <div class="game-docs__grid">
              <article class="game-docs__card">
                <h3>Guia rápido para humanos curiosos</h3>
                <p>Use o painel esquerdo para configurar a partida: escolha se você joga, se a IA assume ou se ficam em modo observação. Cada botão é autoexplicativo e mostra dicas quando o mouse passa por cima.</p>
                <ul>
                  <li><strong>Começar/Resetar:</strong> reinicia o jogo com as configurações ativas — perfeito para testar microajustes.</li>
                  <li><strong>Modo IA:</strong> alterna entre controle humano e aprendizado automático. Ótimo para ver a criatura evoluindo.</li>
                  <li><strong>Power-ups de análise:</strong> ative estatísticas extras e veja o mapa neural reagindo ao que acontece na tela.</li>
                </ul>
              </article>
              <article class="game-docs__card">
                <h3>Parâmetros e painéis sem drama</h3>
                <p>O painel inferior mostra as entranhas da rede neural.</p>
                <ul>
                  <li><strong>Mapa neural:</strong> PX, DP, DY, TI, DZ, IX, IY e MEM são as entradas que alimentam a IA — uma enciclopédia compacta do campo de batalha.</li>
                  <li><strong>Fitness & evolução:</strong> curvas indicando se a IA está aprendendo ou apenas improvisando.</li>
                  <li><strong>Histórico da IA:</strong> um log em português claro sobre o que a inteligência está testando, comemorando e corrigindo.</li>
                </ul>
                <p>Quer experimentar? Ajuste velocidades, densidade de projéteis e comportamento dos inimigos nos controles laterais para observar novas táticas.</p>
              </article>
              <article class="game-docs__card">
                <h3>Tecnologias sob o capô</h3>
                <p>Por trás da cortina temos:</p>
                <ul>
                  <li><strong>HTML5 Canvas</strong> renderizando o jogo em tempo real.</li>
                  <li><strong>Arquitetura ECS</strong> dividindo entidades, componentes e sistemas.</li>
                  <li><strong>Módulos ES6</strong> organizando IA, HUD, controles e efeitos.</li>
                  <li><strong>Algoritmo evolutivo</strong> que ajusta pesos, avalia fitness e seleciona os melhores comportamentos.</li>
                  <li><strong>Web Audio API</strong> para feedbacks sonoros sem travar o loop.</li>
                </ul>
              </article>
              <article class="game-docs__card">
                <h3>Dicas técnicas para ir além</h3>
                <ul>
                  <li><code>src/core/configuracao.js</code> concentra presets de jogo, IA e efeitos — duplique perfis para novos experimentos.</li>
                  <li><code>src/ia</code> guarda a lógica neural e o ciclo de mutações. Perfeito para plugar novos sensores ou funções de ativação.</li>
                  <li><code>src/ui</code> renderiza HUD e visualizações: ponto ideal para exportar dados ou acoplar dashboards.</li>
                  <li>O <code>PainelControles</code> fornece hooks para telemetria, replays ou integração com dashboards externos.</li>
                </ul>
                <p class="game-docs__closing">Teste deixar a IA treinando alguns minutos, depois reassuma o teclado: é como jogar com um colega que aprendeu todos os atalhos enquanto você pegava café.</p>
              </article>
            </div>
          </div>
        </section>
      </footer>
    </div>

    <script type="module" src="../src/main.js"></script>
    <script src="./scripts/bloco-controle.js"></script>
    <script type="module" src="./scripts/tema-ui.js"></script>
  </body>
</html>
